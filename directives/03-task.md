# 任務清單 (Navigation Refactor & Optimization)

- [x] **Phase 1: 路由與組件重構** <!-- id: 0 -->
    - [x] 建立 `src/views/ChapterView.vue` <!-- id: 1 -->
    - [x] 修改 `src/router/index.js` 新增章節路由 <!-- id: 2 -->
    - [x] 修改 `src/views/HomeView.vue` 導航邏輯 <!-- id: 3 -->
    - [x] 清理 `src/views/SlideViewer.vue` 移除冗餘邏輯 <!-- id: 4 -->
- [x] **Phase 2: 驗證與優化** <!-- id: 5 -->
    - [x] 驗證 Subgroup 流程 (AlwaysRobusInfo) <!-- id: 6 -->
    - [x] 驗證 Flat 流程 (WalkingMap) <!-- id: 7 -->
    - [x] 檢查 Navigation Overlay 的 "Back" 行為是否正確 <!-- id: 8 -->
- [x] **Phase 3: UI 風格重構 (Light Theme)** <!-- id: 9 -->
    - [x] 更新全域樣式 (App.vue/style.css) 為淺色系 <!-- id: 10 -->
    - [x] 更新 HomeView 卡片樣式 (Sibuzu 風格) <!-- id: 11 -->
    - [x] 更新 ChapterView 卡片樣式 (Sibuzu 風格) <!-- id: 12 -->
- [x] **Phase 4: 圖片優化 (WebP)** <!-- id: 13 -->
    - [x] 安裝 `sharp`, `glob` <!-- id: 14 -->
    - [x] 建立 `scripts/optimize-images.mjs` <!-- id: 15 -->
    - [x] 更新 `package.json` build scripts <!-- id: 16 -->
    - [x] 建立圖片路徑 Helper 並更新 Vue 組件 <!-- id: 17 -->
- [x] **Phase 5: 動態發現 (Vite Plugin)** <!-- id: 18 -->
    - [x] 建立 `plugins/vite-plugin-slides.js` <!-- id: 19 -->
    - [x] 更新 `vite.config.js` 註冊 Plugin <!-- id: 20 -->
    - [x] 更新 `src/stores/slide.js` 使用 `virtual:slides` <!-- id: 21 -->
    - [x] 移除 `gen_manifest.py` <!-- id: 22 -->
- [x] **Phase 6: 導航增強與網址同步** <!-- id: 23 -->
    - [x] 更新 `SwiperComponent.vue` 發送 `attemptNext` 事件 <!-- id: 24 -->
    - [x] 更新 `SlideViewer.vue` 實作 URL Hash Sync <!-- id: 25 -->
    - [x] 更新 `SlideViewer.vue` 處理最後一頁導航行為 <!-- id: 26 -->
    - [x] 修復 "Next Chapter" 按鈕功能 <!-- id: 27 -->
- [x] **Phase 7: 版面與路由優化** <!-- id: 28 -->
    - [x] 修改 `SwiperComponent.vue` 優化 CSS (w-full h-full) <!-- id: 29 -->
    - [x] 更新 `SlideViewer.vue` 支援 Root Redirect (Subgroup -> Chapter List) <!-- id: 30 -->
    - [x] 更新 `SlideViewer.vue` 支援 Default Query (`?slide=1`) <!-- id: 31 -->
- [x] **Phase 8: 焦點與邏輯修復** <!-- id: 32 -->
    - [x] `SlideViewer.vue` 實作 autofocus on Prompt <!-- id: 33 -->
    - [x] 修正 `currentChapterIndex` 與 `nextChapterId` 邏輯 <!-- id: 34 -->
- [x] **Phase 9: 建置同步與清理** <!-- id: 35 -->
    - [x] `scripts/optimize-images.mjs` 刪除 dist 中多餘的 WebP <!-- id: 36 -->
    - [x] `scripts/optimize-images.mjs` 處理 Zone.Identifier 檔案 <!-- id: 37 -->
- [x] **Phase 10: 效能優化 (Resize & LQIP)** <!-- id: 38 -->
    - [x] `optimize-images.mjs`: Resize 1280, Quality 70, Generate Thumbnails <!-- id: 39 -->
    - [x] `utils/image.js`: Return `{ src, placeholder }` <!-- id: 40 -->
    - [x] `SwiperComponent.vue`: Implement Blur-up Loading <!-- id: 41 -->
- [x] **Phase 11: 進階顯示與手機支援** <!-- id: 42 -->
    - [x] `optimize-images.mjs`: Quality 75, Resize 1920, Multi-res (Mobile/Tiny) <!-- id: 43 -->
    - [x] `utils/image.js`: Return `srcset` support <!-- id: 44 -->
    - [x] `SwiperComponent.vue`: Implement `srcset`, IntersectionObserver, Mobile Rotation <!-- id: 45 -->
- [x] **Phase 12: 影像策略精煉** <!-- id: 46 -->
    - [x] `optimize-images.mjs`: Simplify to Main (1920) + Small (200), remove Mobile/Tiny <!-- id: 47 -->
    - [x] `utils/image.js`: Remove `srcset` <!-- id: 48 -->
    - [x] `SwiperComponent.vue`: Remove `srcset` <!-- id: 49 -->
- [x] **Phase 13: 手機旋轉 CSS 精煉** <!-- id: 50 -->
    - [x] `SwiperComponent.vue`: Implement `fixed` + `translate` centering for pseudo-rotation <!-- id: 51 -->
- [x] **Phase 14: 按鈕旋轉支援** <!-- id: 52 -->
    - [x] `SwiperComponent.vue`: Emit `rotationChanged` event <!-- id: 53 -->
    - [x] `SlideViewer.vue`: Apply rotation styles to Prev/Next buttons <!-- id: 54 -->
- [x] **Phase 15: 滑動手勢旋轉支援** <!-- id: 55 -->
    - [x] `SwiperComponent.vue`: Bind `:direction` to computed property <!-- id: 56 -->
- [x] **Phase 16: 上一章節導航支援** <!-- id: 57 -->
    - [x] `SwiperComponent.vue`: Emit `attemptPrev` when keydown at start <!-- id: 58 -->
    - [x] `SlideViewer.vue`: Handle `prevChapterId` and Prompt Logic <!-- id: 59 -->
